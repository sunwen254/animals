<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鲸鱼 - 极地动物保护</title>
    <link rel="stylesheet" href="./CSS/style.css">
    <link rel="stylesheet" href="./CSS/animals.css">
    <link rel="stylesheet" href="./CSS/responsive.css">
    <link rel="stylesheet" href="./CSS/ice-bg.css">
</head>
<body>
    <div class="ice-texture"></div>
    <div class="aurora-effect"></div>
<div class="animal-3d-main">
  <div class="animal-3d-view">
    <div id="animal-3d-container"></div>
  </div>
  <div class="animal-info-panel" id="animalInfoPanel"></div>
</div>
<script src="./JS/three.min.js"></script>
<script src="./JS/OrbitControls.js"></script>
<script src="./JS/GLTFLoader.js"></script>
<script>
// 鲸鱼数据
const animal = {
  name: '鲸鱼', latin: 'Balaenidae',
  model: './static/models/whale_3d_model/scene.gltf',
  desc: '鲸鱼是极地海洋中体型最大的动物，善于长距离迁徙，寿命极长。',
  stats: [
    {label:'体重', value: '100000kg'},
    {label:'寿命', value:'90年'},
    {label:'现状', value:'受威胁'}
  ],
  status: '受威胁',
  color: '#2563eb'
};
// 3D模型加载
let renderer, scene, camera, controls, currentModel;
function loadAnimalModel() {
  const container = document.getElementById('animal-3d-container');
  if (!container) return;
  container.innerHTML = '';
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
  camera.position.set(0, 1, 3.5);
  renderer = new THREE.WebGLRenderer({antialias:true,alpha:true});
  renderer.setSize(400, 400);
  container.appendChild(renderer.domElement);
  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.08;
  controls.enablePan = false;
  controls.minDistance = 2;
  controls.maxDistance = 8;
  controls.autoRotate = true;
  controls.autoRotateSpeed = 0.7;
  scene.add(new THREE.AmbientLight(0xffffff, 0.7));
  const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
  dirLight.position.set(5, 10, 7);
  scene.add(dirLight);
  const loader = new THREE.GLTFLoader();
  loader.load(animal.model, function(gltf){
    currentModel = gltf.scene;
    currentModel.position.set(0,0,0);
    currentModel.rotation.y = Math.PI/2;
    const box = new THREE.Box3().setFromObject(currentModel);
    const size = new THREE.Vector3();
    box.getSize(size);
    const maxDim = Math.max(size.x, size.y, size.z);
    let scale = 2.5 / maxDim;
    scale *= 1.7;
    currentModel.scale.setScalar(scale);
    const center = new THREE.Vector3();
    box.getCenter(center);
    currentModel.position.x -= center.x * scale;
    currentModel.position.y -= center.y * scale;
    currentModel.position.z -= center.z * scale;
    currentModel.position.y -= 1.2;
    scene.add(currentModel);
    animate();
  });
  function animate(){
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
  }
}
function renderAnimalInfo() {
  const panel = document.getElementById('animalInfoPanel');
  if (!panel) return;
  panel.innerHTML = `
    <div class="animal-info-card">
      <div class="animal-status" style="background: linear-gradient(90deg,${animal.color} 0%,#ffed85 100%);">${animal.status}</div>
      <h2 class="animal-title">${animal.name} <span class="animal-latin">${animal.latin}</span></h2>
      <div class="animal-desc typewriter">${animal.desc}</div>
      <div class="animal-stats">
        ${animal.stats.map(s=>`<div class='stat-item'><span class='stat-label'>${s.label}</span><span class='stat-value'>${s.value}</span></div>`).join('')}
      </div>
    </div>
  `;
}
loadAnimalModel();
renderAnimalInfo();
</script>
<script src="./JS/ice-bg.js"></script>
<script src="./JS/aurora-canvas.js"></script>
</body>
</html> 