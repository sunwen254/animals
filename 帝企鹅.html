<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>帝企鹅 - 极地动物保护</title>
    <link rel="stylesheet" href="./CSS/style.css">
    <link rel="stylesheet" href="./CSS/animals.css">
    <link rel="stylesheet" href="./CSS/responsive.css">
</head>
<body>
    <!-- 背景效果 -->
    <div class="ice-texture"></div>
    <div class="aurora-effect"></div>
    
<div class="animal-3d-main">
        <!-- 3D模型视图 -->
  <div class="animal-3d-view">
    <div id="animal-3d-container"></div>
  </div>
        
        <!-- 信息面板 -->
        <div class="animal-info-panel">
            <div class="animal-info-card">
                <div class="animal-status">稳定</div>
                <h1 class="animal-title">帝企鹅<span class="animal-latin">Aptenodytes forsteri</span></h1>
                <p class="animal-desc">帝企鹅是南极最大的企鹅，能在零下60℃的环境下孵化幼崽，群居生活，耐寒能力极强。它们在极寒环境中繁衍生息，展现了生命的顽强。</p>
                <div class="animal-stats">
                    <div class="stat-item">
                        <span class="stat-label">体重</span>
                        <span class="stat-value">40kg</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">寿命</span>
                        <span class="stat-value">20年</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">现状</span>
                        <span class="stat-value">稳定</span>
                    </div>
                </div>
            </div>
        </div>
</div>

    <!-- 脚本 -->
<script src="./JS/three.min.js"></script>
<script src="./JS/OrbitControls.js"></script>
<script src="./JS/GLTFLoader.js"></script>
<script>
// 帝企鹅数据
const animal = {
        name: '帝企鹅',
        latin: 'Aptenodytes forsteri',
        model: 'http://localhost:8000/static/models/emperor_penguin/scene.gltf',  // 使用完整的本地服务器URL
  desc: '帝企鹅是南极最大的企鹅，能在零下60℃的环境下孵化幼崽，群居生活，耐寒能力极强。',
  stats: [
            {label:'体重', value:'40kg'},
    {label:'寿命', value:'20年'},
    {label:'现状', value:'稳定'}
  ],
  status: '稳定',
  color: '#ffb300'
};

// 3D模型加载
let renderer, scene, camera, controls, currentModel;
function loadAnimalModel() {
  const container = document.getElementById('animal-3d-container');
  if (!container) return;
        
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
  camera.position.set(0, 1, 3.5);
        
        renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setClearColor(0x000000, 0);
  container.appendChild(renderer.domElement);
        
  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.08;
  controls.enablePan = false;
  controls.minDistance = 2;
  controls.maxDistance = 8;
  controls.autoRotate = true;
  controls.autoRotateSpeed = 0.7;
        
        // 环境光
  scene.add(new THREE.AmbientLight(0xffffff, 0.7));
        
        // 主光源
        const mainLight = new THREE.DirectionalLight(0xffffff, 0.8);
        mainLight.position.set(5, 10, 7);
        scene.add(mainLight);
        
        // 补光
        const fillLight = new THREE.DirectionalLight(0xa5f3fc, 0.3);
        fillLight.position.set(-5, -10, -7);
        scene.add(fillLight);
        
  const loader = new THREE.GLTFLoader();
        loader.load(animal.model, function(gltf) {
    currentModel = gltf.scene;
            currentModel.position.set(0, 0, 0);
    currentModel.rotation.y = Math.PI/2;
            
    const box = new THREE.Box3().setFromObject(currentModel);
    const size = new THREE.Vector3();
    box.getSize(size);
    const maxDim = Math.max(size.x, size.y, size.z);
    let scale = 2.5 / maxDim;
    scale *= 0.82;
    currentModel.scale.setScalar(scale);
            
    const center = new THREE.Vector3();
    box.getCenter(center);
    currentModel.position.x -= center.x * scale;
    currentModel.position.y -= center.y * scale;
    currentModel.position.z -= center.z * scale;
            
    scene.add(currentModel);
    animate();
  });
    }

    function animate() {
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
  }

    // 初始化
    loadAnimalModel();

    // 响应窗口调整
    window.addEventListener('resize', function() {
        const container = document.getElementById('animal-3d-container');
        if (container && renderer && camera) {
            const width = container.clientWidth;
            const height = container.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        }
    });
</script>
</body>
</html> 